{"version":3,"file":"main.537b53526c61c2969c6c.js","mappings":"ysBAAqBA,EAAQ,oBAAAA,I,uGAAAC,CAAA,KAAAD,G,EAAA,K,EACf,I,MADe,gB,uFACb,C,QAcb,O,EAdaA,G,EAAA,EAAAE,IAAA,YAAAC,MAEd,SAAUC,GACU,mBAAPA,GACTC,KAAKC,UAAUC,KAAKH,EAExB,GAAC,CAAAF,IAAA,cAAAC,MAED,SAAYC,GACVC,KAAKC,UAAYD,KAAKC,UAAUE,QAAO,SAACC,GAAM,OAAKA,GAAUL,CAAE,GACjE,GAAC,CAAAF,IAAA,YAAAC,MAED,SAAUO,GACRL,KAAKC,UAAUK,SAAQ,SAACP,GAAE,OAAKA,EAAGM,EAAK,GACzC,M,oEAACV,CAAA,CAf0B,G,60CCAa,IAAAY,EAAA,IAAAC,QAAAC,EAAA,IAAAD,QAAAE,EAAA,IAAAF,QAAAG,EAAA,IAAAH,QAAAI,EAAA,IAAAC,QAAAC,EAAA,IAAAD,QAAAE,EAAA,IAAAF,QAAAG,EAAA,IAAAH,QAAAI,EAAA,IAAAJ,QAAAK,EAAA,IAAAL,QAAAM,EAAA,IAAAN,QAErBO,EAAM,WAOzB,SAAAA,EAAYC,I,4FAAQzB,CAAA,KAAAwB,GAAAE,EAAA,KAAAH,GAAAG,EAAA,KAAAJ,GAAAI,EAAA,KAAAL,GAAAK,EAAA,KAAAN,GAAAM,EAAA,KAAAP,GAAAO,EAAA,KAAAR,GAAAQ,EAAA,KAAAV,GAAAW,EAAA,KAAAhB,EAAA,CAAAiB,UAAA,EAAA1B,MANV,KAAEyB,EAAA,KAAAd,EAAA,CAAAe,UAAA,EAAA1B,MACG,OAAIyB,EAAA,KAAAb,EAAA,CAAAc,UAAA,EAAA1B,MACP,OAAIyB,EAAA,KAAAZ,EAAA,CAAAa,UAAA,EAAA1B,MAEJ,IAAIH,IAGd8B,EAAAzB,KAAIO,EAAWc,EACjB,C,QAoBC,O,EApBAD,G,EAAA,EAAAvB,IAAA,SAAAC,MAED,WAAS,IAAA4B,EAAA,KACPC,QAAQC,IAAI,kBACZH,EAAAzB,KAAIU,EAAamB,OAAOC,QAAQC,WAChCF,OAAOC,QAAQC,UAAYC,EAAAhC,KAAIY,EAAAqB,GAAYC,KAAKlC,MAChD6B,OAAOM,WAAa,kBAAAH,EAAMN,EAAIZ,EAAAsB,GAAAC,KAAJX,EAAYY,SAASC,SAAQ,EACvDC,SAASC,iBAAiB,QAAST,EAAAhC,KAAIgB,EAAA0B,GAAiBR,KAAKlC,OAC7D6B,OAAOC,QAAQC,UAAU,CAAC,EAAG,GAAIO,SAASC,SAC5C,GAAC,CAAA1C,IAAA,iBAAAC,MAED,SAAe6C,GACb,IAAKA,EAAI,OAAO,KAGhBlB,EAAAzB,KAAIS,EAAgBkC,EACtB,GAAC,CAAA9C,IAAA,sBAAAC,MAED,SAAoB6C,GAClBC,EAAA5C,KAAIW,GAAWkC,UAAUF,EAC3B,M,oEAACvB,CAAA,CA7BwB,GA6BxB,SAAAa,EAGUa,EAAOC,EAAOC,GAGvB,GAFArB,QAAQC,IAAI,wBAEPoB,EAAL,CAEA,IAAMC,EAAWX,SAASC,SAE1BP,EAAAhC,KAAIc,EAAAsB,GAAAC,KAAJrC,KAAYgD,EAAQC,EAJD,CAMrB,CAAC,SAAAb,EAEMY,EAAQC,GAAU,IAAAC,EAAA,KACjBC,EAAO,WAAuB,IAAtBC,EAAQC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGL,EACvBJ,EAAAM,EAAIxC,GAAW8C,MAAM1B,QAAS,CAAC,CAAEkB,OAAAA,EAAQC,SAAAA,GAAY,KAAMG,IAE3DpB,EAAAkB,EAAInC,EAAA0C,GAAApB,KAAJa,EAAeE,EACjB,EAEiC,mBAA7BR,EAAO5C,KAAIS,GACbmC,EAAA5C,KAAIS,GAAA4B,KAAJrC,KAAkBgD,EAAQC,EAAUE,GAEpCA,GAEJ,CAAC,SAAAM,IAGmC,IAA1BC,EAAIL,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGf,SAASC,SAClBoB,EAAQ3B,EAAAhC,KAAIiB,EAAA2C,GAAAvB,KAAJrC,KAAgB0D,IAAI1B,EAAKhC,KAAIiB,EAAA2C,GAAAvB,KAAJrC,KAAgB,KACvDgC,EAAAhC,KAAIkB,EAAA2C,GAAAxB,KAAJrC,KAAiB2D,EAAMG,WACvB9B,EAAAhC,KAAImB,EAAA4C,GAAA1B,KAAJrC,KACF,CAAC,SAAA0C,EAEesB,GACdA,EAAMC,iBACN,IAAMC,EAAOF,EAAMG,OAEfD,EAAKE,QAAQC,YACfxC,OAAOC,QAAQC,UAAU,CAAC,EAAG,GAAImC,EAAKE,QAAQC,WAElD,CAAC,SAAAT,EAEUF,GACT,OAAKA,EACEd,EAAA5C,KAAIO,GAAS+D,MAAK,SAAAX,GAAK,OAAIA,EAAMD,OAASA,CAAI,IADnC,IAEpB,CAAC,SAAAG,EAEWU,GAMV,IAAMC,EAAahC,SAASiC,cAAc,gBAC1CD,EAAWE,UAAY,GACvBF,EAAWG,QAAO,IAAIJ,GAAYK,SAGpC,CAAC,SAAAb,IAICnB,EAAA5C,KAAIW,GAAWkE,WACjB,C,mqBChGqB,IAEFC,EAAM,oBAAAA,K,4FAAAlF,CAAA,KAAAkF,EAAA,C,QAGxB,O,EAHwBA,G,EAAA,EAAAjF,IAAA,SAAAC,MACzB,WACE,MAAO,aACT,M,oEAACgF,CAAA,CAHwB,G,ihCCFNP,EAAS,WAI5B,SAAAA,EAAYQ,I,4FAAOnF,CAAA,KAAA2E,GAAAS,EAAA,aAHX,CAAC,GAIPhF,KAAK+E,M,+VAAKE,CAAA,GAAQF,EACpB,C,QAIC,O,EAJAR,G,EAAA,EAAA1E,IAAA,SAAAC,MAED,WACE,MAAM,IAAIoF,MAAM,wBAClB,M,oEAACX,CAAA,CAV2B,G,q6BCAc,IAEvBY,EAAK,SAAAC,I,qRAAAC,CAAAF,EAAAC,GAAA,I,QAAAE,G,EAAAH,E,qrBACxB,SAAAA,EAAYJ,GAAO,O,4FAAAnF,CAAA,KAAAuF,GAAAG,EAAAjD,KAAA,KACX0C,EACR,CAsBC,O,EAtBAI,G,EAAA,EAAAtF,IAAA,cAAAC,MAED,WACE,MAAO,wBAAPyF,OACiBvF,KAAK+E,MAAMS,GAAE,qBAAAD,OACpBvF,KAAK+E,MAAMU,MAAK,2CAAAF,OAEVvF,KAAK+E,MAAMW,KAAI,wBAAAH,OACjBvF,KAAK+E,MAAMS,GAAE,0BAAAD,OACXvF,KAAK+E,MAAMY,KAAI,2BAAAJ,OACdvF,KAAK+E,MAAMa,UAAS,0DAOvC,GAAC,CAAA/F,IAAA,SAAAC,MAGD,WACE,OAAOE,KAAK6F,aACd,M,oEAACV,CAAA,CAzBuB,CAASZ,G,stDCANuB,GAAKC,GCoBrBC,GAAS,IAAI5E,EAhBX,CACb,CACEsC,KAAM,IACNI,UAAWgB,GAEb,CACEpB,KAAM,WACNI,UCRuB,SAAAsB,I,qRAAAC,CAAAY,EAAAb,GAAA,I,QAAAE,G,EAAAW,E,6jBAAA,SAAAA,IAAA,IAAAvE,E,mGAAA9B,CAAA,KAAAqG,GAAA,QAAAC,EAAA7C,UAAAC,OAAA6C,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAAhD,UAAAgD,GACgB,O,EADhBC,EAAA5E,EAAA4D,EAAAjD,KAAAmB,MAAA8B,EAAA,OAAAC,OAAAY,K,EACX,CAAEI,MAAO,GAAIC,SAAU,K,MADZ,kB,wFACgB9E,CAAA,CAwDxC,O,EAxDwCuE,G,EAAA,EAAApG,IAAA,gBAAAC,MAEzC,WACE6B,QAAQC,IAAI,qBACd,GAAC,CAAA/B,IAAA,mBAAAC,MAED,WACE6B,QAAQC,IAAI,wBACd,GAAC,CAAA/B,IAAA,cAAAC,MAED,WACE,MAAO,wSAAPyF,OAMkB,IAAIJ,EAAM,CACRO,KAAM,OACNE,UAAW,qBACXa,YAAa,QACbd,KAAM,QACNH,GAAI,QACJC,MAAO,gBACRb,SAAQ,2FAAAW,OAGR,IAAIJ,EAAM,CACPO,KAAM,WACNE,UAAW,wBACXa,YAAa,WACbd,KAAM,WACNH,GAAI,WACJC,MAAO,mBACRb,SAAQ,iLAO/B,GAAC,CAAA/E,IAAA,SAAAC,MAED,WACE,IAAM4G,EAAYlE,SAASmE,cAAc,OACnCC,EAAW5G,KAAK6F,cAUtB,OARAlE,QAAQC,IAAI,oBAEZ8E,EAAUhC,UAAYkC,EAEtBF,EAAUjC,cAAc,UAAUhC,iBAAiB,SAAUzC,KAAK6G,cAAc3E,KAAKlC,OAI9E0G,CACT,M,oEAACT,CAAA,CAzDwB,CAAS1B,IDUlC,CACEb,KAAM,IACNI,UEjByB,oBAAAgD,K,4FAAAlH,CAAA,KAAAkH,EAAA,C,QAK1B,O,EAL0BA,G,EAAA,EAAAjH,IAAA,SAAAC,MAC3B,WACE,MAAO,8CAGT,M,oEAACgH,CAAA,CAL0B,M,k7BF2B7Bd,GAAOe,gBAAe,SAAUC,EAAIC,EAAM9D,GAE7B,aAAP6D,EACF7D,EAAK,YAELA,GAEJ,IDhC6B2C,GIAL,SAAAV,I,sRAAAC,CAAAS,EAAAV,GAAA,I,QAAAE,G,EAAAQ,E,wrBAAA,SAAAA,IAAA,O,4FAAAlG,CAAA,KAAAkG,GAAAR,EAAA9B,MAAA,KAAAH,UAAA,CAUrB,O,EAVqByC,G,EAAA,EAAAjG,IAAA,SAAAC,MACtB,WACE,MAAO,sNAQT,M,qEAACgG,CAAA,CAVqB,CAASvB,GJACwB,GKIxB,CAACC,ILHTxD,SAASiC,cAAc,QAAQC,WAAY,IAAIoB,IAAMlB,SACrDmB,GAAKzF,SAAQ,SAAA4G,GAAG,OAAIA,EAAIC,QAAQ,G","sources":["webpack://js-native-spa/./src/plugins/Observer.js","webpack://js-native-spa/./src/plugins/router.js","webpack://js-native-spa/./src/pages/movies/index.js","webpack://js-native-spa/./src/plugins/Component.js","webpack://js-native-spa/./src/common/components/Input/index.js","webpack://js-native-spa/./src/init/index.js","webpack://js-native-spa/./src/router/index.js","webpack://js-native-spa/./src/pages/sign-in/index.js","webpack://js-native-spa/./src/pages/not-found/index.js","webpack://js-native-spa/./src/App.js","webpack://js-native-spa/./Index.js"],"sourcesContent":["export default class Observer {\n  observers = [];\n\n  subscribe(fn) {\n    if (typeof fn === \"function\") {\n      this.observers.push(fn);\n    }\n  }\n\n  unsubscribe(fn) {\n    this.observers = this.observers.filter((currFn) => currFn != fn);\n  }\n\n  broadcast(data) {\n    this.observers.forEach((fn) => fn(data));\n  }\n}\n\n\n","import Observer from \"@/plugins/Observer\";\n\nexport default class Router {\n  #routes = [];\n  #guardBefore = null;\n  #original = null\n\n  #observer = new Observer()\n\n  constructor(routes) {\n    this.#routes = routes;\n  }\n\n  onInit() {\n    console.log('----onInit----');\n    this.#original = window.history.pushState;\n    window.history.pushState = this.#pushState.bind(this)\n    window.onpopstate = () => this.#guard(location.pathname);\n    document.addEventListener('click', this.#onClickHandler.bind(this))\n    window.history.pushState({}, '', location.pathname);\n  }\n\n  setGuardBefore(cb) {\n    if (!cb) return null;\n\n\n    this.#guardBefore = cb;\n  }\n\n  subscribePageLoaded(cb) {\n    this.#observer.subscribe(cb)\n  }\n\n\n  #pushState(state, title, pathTo) {\n    console.log('----My pushState----');\n\n    if (!pathTo) return;\n    // before\n    const pathFrom = location.pathname;\n\n    this.#guard(pathTo, pathFrom)\n\n  }\n\n  #guard(pathTo, pathFrom) {\n    const next = (redirect = pathTo) => {\n      this.#original.apply(history, [{ pathTo, pathFrom }, null, redirect]);\n      // history.pushState(state, null, '/path');\n      this.#onUpdate(redirect);\n    };\n\n    if (typeof this.#guardBefore === 'function') {\n      this.#guardBefore(pathTo, pathFrom, next)\n    } else {\n      next();\n    }\n  }\n\n\n  #onUpdate(path = location.pathname) {\n    const route = this.#findRoute(path) || this.#findRoute('*'); // toDo: refactoring\n    this.#updateView(route.component);\n    this.#handlePageLoaded();\n  }\n\n  #onClickHandler(event) {\n    event.preventDefault();\n    const node = event.target;\n\n    if (node.dataset.routerLink) { // behaviour\n      window.history.pushState({}, '', node.dataset.routerLink)\n    }\n  }\n\n  #findRoute(path) {\n    if (!path) return null;\n    return this.#routes.find(route => route.path === path);\n  }\n\n  #updateView(Component) {\n    // setTimeout(() => {\n    //   document.querySelector('.router-view').innerHTML = new Component().render()\n    //\n    // }, 3000)\n\n    const routerView = document.querySelector('.router-view');\n    routerView.innerHTML = '';\n    routerView.append(new Component().render())\n\n    //all\n  }\n\n\n  #handlePageLoaded() {\n    this.#observer.broadcast()\n  }\n}","import './movies.scss';\n\nexport default class Movies {\n  render() {\n    return 'Movies Page'\n  }\n}","export default class Component {\n  props = {};\n\n\n  constructor(props) {\n    this.props = { ...props };\n  }\n\n  render() {\n    throw new Error('Render should present');\n  }\n}","import Component from \"@/plugins/Component\";\n\nexport default class Input extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  getTemplate() {\n    return `\n       <label for=\"${this.props.id}\" >\n            ${this.props.label}\n          <input \n            type=\"${this.props.type}\" \n            id=\"${this.props.id}\" \n            name=\"${this.props.name}\" \n            class=\"${this.props.className}\"\n          />\n          Icon 2\n      </label>\n    `;\n\n\n  }\n\n\n  render() {\n    return this.getTemplate();\n  }\n}","\n\nexport default function init(App, libs) {\n  document.querySelector('#app').innerHTML = new App().render();\n  libs.forEach(lib => lib.onInit());\n}","import Router from \"@/plugins/router\";\nimport Movies from \"@/pages/movies\";\nimport SignIn from \"@/pages/sign-in\";\nimport NotFound from \"@/pages/not-found\";\n\n\nconst routes = [\n  {\n    path: '/',\n    component: Movies\n  },\n  {\n    path: '/sign-in',\n    component: SignIn\n  },\n  {\n    path: '*',\n    component: NotFound\n  }\n];\n\n\nexport const router = new Router(routes);\n\n\nconst isAuth = false;\n\nrouter.setGuardBefore(function (to, from, next) {\n\n  if (to !== '/sign-in' && !isAuth) {\n    next('/sign-in')\n  } else {\n    next()\n  }\n})\n\n\n\n//\n// router.subscribePageLoaded(function () {\n//   console.log('--- hook page loaded ---')\n//   // console.log(document.querySelector('#app .router-view').outerHTML)\n// })","import './signin.scss';\nimport Component from \"@/plugins/Component\";\nimport {router} from \"@/router\";\nimport Input from \"@/common/components/Input\";\n\nexport default class SignIn extends Component {\n  credentials = { login: '', password: '' };\n\n  onChangeLogin() {\n    console.log('---change login --')\n  }\n\n  onChangePassword() {\n    console.log('---change password --')\n  }\n\n  getTemplate() {\n    return `\n        <div class=\"sign-in d-flex justify-content-center align-items-center\">\n            <div class=\"card col-6\">\n                <div class=\"card-body\">\n                  <h5 class=\"card-title text-center mb-3\"> Sign In </h5>\n                  <div class=\"mb-2\">\n                    ${new Input({ \n                        type: 'text', \n                        className: 'login form-control', \n                        placeholder: 'login',\n                        name: 'login',\n                        id: 'login',\n                        label: 'Input Login'\n                    }).render()}\n                  </div>\n                  <div class=\"mb-2\">\n                     ${new Input({\n                          type: 'password',\n                          className: 'password form-control',\n                          placeholder: 'password',\n                          name: 'password',\n                          id: 'password',\n                          label: 'Input Password'\n                      }).render()}\n                  </div>\n                  <button type=\"button\" class=\"btn btn-success\">Sign in</button>\n                </div>\n            </div>\n        </div>\n    `\n  }\n\n  render() {\n    const container = document.createElement('div')\n    const template = this.getTemplate();\n\n    console.log('--call render---');\n\n    container.innerHTML = template;\n\n    container.querySelector('#login').addEventListener('change', this.onChangeLogin.bind(this))\n    // container.querySelector('#password').addEventListener('change', this.onChangePassword.bind(this))\n\n\n    return container;\n  }\n}\n\n\n//----solution -1\n// render() {\n  // const template = this.getTemplate();\n  // router.subscribePageLoaded( () => {\n  //   const login = document.querySelector('#login');\n  //\n  //   console.log(login, 'login');\n  //\n  //   login.addEventListener('change', this.onChangeLogin.bind(this));\n  // })\n  // /    return container.innerHTML;\n// }\n\n\n// ----solution - 2\n// document.createElement vs innerHTML\n// const login = document.querySelector('#login');\n//\n// console.log(login, 'login')\n// --> Remember how to make template with document.createElement\n\n\n// Login ---------\n// const loginNode = document.createElement('input')\n// loginNode.classList = 'form-control';\n\n\n// const labelLoginNode = document.createElement('label')\n// labelLoginNode.innerText = 'Login'\n// labelLoginNode.append(loginNode)\n//\n// loginNode.addEventListener('change', this.onChangeLogin.bind(this));\n//\n// // End Login ---------\n//\n// // Password ---------\n// const passwordNode = document.createElement('input')\n// passwordNode.classList = 'form-control';\n//\n// const labelPasswordNode = document.createElement('label')\n// labelPasswordNode.innerText = 'Password'\n// labelPasswordNode.append(passwordNode)\n//\n// passwordNode.addEventListener('change', this.onChangePassword.bind(this));\n//\n// // End Password------------------\n//\n// const container = document.createElement('div');\n// container.classList.add('sign-in')\n//\n// container.append(labelLoginNode)\n// container.append(labelPasswordNode);\n//\n// /// innerHTML vs append\n// setTimeout(() => {\n//   document.querySelector('#app .router-view').append(container);\n// }, 3000)\n","export default class NotFound {\n  render() {\n    return `\n     Upsssss..... 404 Not Found Page\n    `\n  }\n}","import Component from \"@/plugins/Component\";\n\nexport default class App extends Component {\n  render() {\n    return `\n      <main class=\"main-app\">\n          <header class=\"header\">\n            <span class=\"header__logo\">JS Native SPA</span>\n          </header>\n          <div class=\"router-view\"></div>\n      </main>\n    `\n  }\n}","import \"./main.scss\";\nimport {router} from \"./src/router\";\nimport init from \"@/init\";\nimport App from \"@/App\";\n\n\ninit(App, [router])"],"names":["Observer","_classCallCheck","key","value","fn","this","observers","push","filter","currFn","data","forEach","_routes","WeakMap","_guardBefore","_original","_observer","_pushState","WeakSet","_guard","_onUpdate","_onClickHandler","_findRoute","_updateView","_handlePageLoaded","Router","routes","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","writable","_classPrivateFieldSet","_this","console","log","window","history","pushState","_classPrivateMethodGet","_pushState2","bind","onpopstate","_guard2","call","location","pathname","document","addEventListener","_onClickHandler2","cb","_classPrivateFieldGet","subscribe","state","title","pathTo","pathFrom","_this2","next","redirect","arguments","length","undefined","apply","_onUpdate2","path","route","_findRoute2","_updateView2","component","_handlePageLoaded2","event","preventDefault","node","target","dataset","routerLink","find","Component","routerView","querySelector","innerHTML","append","render","broadcast","Movies","props","_defineProperty","_objectSpread","Error","Input","_Component","_inherits","_super","concat","id","label","type","name","className","getTemplate","App","libs","router","SignIn","_len","args","Array","_key","_assertThisInitialized","login","password","placeholder","container","createElement","template","onChangeLogin","NotFound","setGuardBefore","to","from","lib","onInit"],"sourceRoot":""}